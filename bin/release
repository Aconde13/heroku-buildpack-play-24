#!/usr/bin/env bash
# bin/release <build-dir>
set -euo pipefail

BUILD_DIR="$1"

# Si NO hay Procfile en la app, publicamos el proceso web por defecto
if [ ! -f "$BUILD_DIR/Procfile" ]; then
  # Escribe YAML puro a stdout (sin heredocs, sin expansión, sin eco previo)
  printf '%s\n' '---' \
                'default_process_types:' \
                '  web: ./.play/play run --http.port=$PORT $PLAY_OPTS'
else
  # Si hay Procfile, igual devolvemos YAML válido
  printf '%s\n' '---' \
                'default_process_types: {}'
fi
